<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FedonApp</title>
  <link rel="manifest" href="/manifest.json" />
</head>
<body>
  <h1>FedonApp</h1>
  <p id="status">HazÄ±r</p>
  <button id="enablePush">Bildirimleri AÃ§</button>

  <script>
    // Ã‡ALIÅMA ORTAMI: Cloudflare Worker URLâ€™in
    window.WORKER = 'https://fedonpush.fedaiustunol.workers.dev';
  </script>
  <script src="/app.js"></script><!-- HAYALLER (A/B Karar + MantÄ±ksal GerekÃ§e) -->
<section class="card" id="hayaller">
  <div style="display:flex;align-items:center;justify-content:space-between;gap:8px;">
    <h2 style="margin:0">HAYALLER</h2>
    <span class="pill">A/B karar</span>
  </div>
  <p style="margin:6px 0 12px;color:var(--muted)">
    Ä°ki seÃ§eneÄŸi yaz, 3 kÄ±sa kriterle oylayÄ±p mantÄ±ksal bir gerekÃ§eyle Ã¶neri verelim.
  </p>

  <label>SeÃ§enek A</label>
  <input id="optA" type="text" maxlength="120" placeholder="Ã–rn: Åehirde kalmak" style="width:100%;padding:12px;border-radius:12px;border:1px solid #ddd;background:var(--bg);color:var(--fg)">

  <div style="height:8px"></div>

  <label>SeÃ§enek B</label>
  <input id="optB" type="text" maxlength="120" placeholder="Ã–rn: Egeâ€™ye taÅŸÄ±nmak" style="width:100%;padding:12px;border-radius:12px;border:1px solid #ddd;background:var(--bg);color:var(--fg)">

  <hr style="border:none;border-top:1px solid rgba(0,0,0,.08);margin:14px 0">

  <div style="display:grid;gap:10px">
    <div class="card" style="padding:12px">
      <div style="font-weight:600;margin-bottom:8px">Kriter 1 â€” Uzun vadeli deÄŸer</div>
      <div class="row" role="group" aria-label="Kriter 1">
        <button class="pill" data-crit="v" data-win="A">A daha iyi</button>
        <button class="pill" data-crit="v" data-win="B">B daha iyi</button>
        <button class="pill" data-crit="v" data-win="=">EÅŸit</button>
      </div>
    </div>

    <div class="card" style="padding:12px">
      <div style="font-weight:600;margin-bottom:8px">Kriter 2 â€” Risk / belirsizlik daha dÃ¼ÅŸÃ¼k</div>
      <div class="row" role="group" aria-label="Kriter 2">
        <button class="pill" data-crit="r" data-win="A">A daha iyi</button>
        <button class="pill" data-crit="r" data-win="B">B daha iyi</button>
        <button class="pill" data-crit="r" data-win="=">EÅŸit</button>
      </div>
    </div>

    <div class="card" style="padding:12px">
      <div style="font-weight:600;margin-bottom:8px">Kriter 3 â€” BaÅŸlama kolaylÄ±ÄŸÄ± / ilk adÄ±m</div>
      <div class="row" role="group" aria-label="Kriter 3">
        <button class="pill" data-crit="e" data-win="A">A daha iyi</button>
        <button class="pill" data-crit="e" data-win="B">B daha iyi</button>
        <button class="pill" data-crit="e" data-win="=">EÅŸit</button>
      </div>
    </div>
  </div>

  <div style="height:12px"></div>
  <button id="decide" class="cta">ğŸ¤” Fedonâ€™a Sor</button>

  <div id="result" class="card" style="display:none;margin-top:12px">
    <div id="decision" style="font-size:18px;font-weight:700;margin-bottom:6px"></div>
    <div id="reason" style="color:var(--muted)"></div>
  </div>
</section>

<script>
(() => {
  const $ = (id) => document.getElementById(id);
  const optA = $('optA'), optB = $('optB'), decide = $('decide');
  const result = $('result'), decision = $('decision'), reason = $('reason');

  // Kriter seÃ§imlerini tut
  const picks = { v: '=', r: '=', e: '=' }; // v=deÄŸer, r=risk, e=baÅŸlama kolaylÄ±ÄŸÄ±
  document.querySelectorAll('#hayaller button.pill[data-crit]').forEach(btn=>{
    btn.addEventListener('click', () => {
      const { crit, win } = btn.dataset;
      picks[crit] = win;
      // seÃ§ili butonu vurgula
      btn.parentElement.querySelectorAll('button').forEach(b=>b.style.background='var(--card)');
      btn.style.background = 'rgba(10,132,255,.15)';
    });
  });

  function sanitize(s){ return (s||'').trim().slice(0,120); }

  decide.addEventListener('click', () => {
    const A = sanitize(optA.value);
    const B = sanitize(optB.value);
    if (!A || !B) {
      decision.textContent = 'LÃ¼tfen A ve B seÃ§eneklerini yaz.';
      reason.textContent = '';
      result.style.display = 'block';
      return;
    }

    // Puanlama (A/B): v=+2, r=+2, e=+1 aÄŸÄ±rlÄ±k
    const weight = { v:2, r:2, e:1 };
    let scoreA = 0, scoreB = 0;
    for (const k of Object.keys(picks)) {
      if (picks[k] === 'A') scoreA += weight[k];
      else if (picks[k] === 'B') scoreB += weight[k];
    }

    let winner = 'A'; 
    if (scoreB > scoreA) winner = 'B';
    else if (scoreB === scoreA) {
      // eÅŸitlikte kÄ±sa baÄŸlam: hangisi daha spesifikse onu seÃ§
      winner = (B.length > A.length) ? 'B' : 'A';
    }

    const sel = winner === 'A' ? A : B;

    // MantÄ±ksal kÄ±sa gerekÃ§e (seÃ§ilen kriterlere gÃ¶re cÃ¼mle kur)
    const parts = [];
    if (picks.v !== '=') parts.push((winner===picks.v ? 'uzun vadeli deÄŸeri daha yÃ¼ksek' : 'uzun vadede avantajlÄ±'));
    if (picks.r !== '=') parts.push((winner===picks.r ? 'riski/BelirsizliÄŸi daha dÃ¼ÅŸÃ¼k' : 'daha Ã¶ngÃ¶rÃ¼lebilir'));
    if (picks.e !== '=') parts.push((winner===picks.e ? 'ilk adÄ±mÄ± atmasÄ± daha kolay' : 'baÅŸlangÄ±Ã§ bariyeri daha dÃ¼ÅŸÃ¼k'));
    const msg = parts.length ? parts.join(', ') : 'genel denge aÃ§Ä±sÄ±ndan daha mantÄ±klÄ±';

    decision.textContent = `Fedonâ€™Ä±n cevabÄ±: ${winner} â†’ ${sel}`;
    reason.textContent   = `Neden: ${msg}.`;

    result.style.display = 'block';
    try { localStorage.setItem('fedon.lastDecision', JSON.stringify({A,B,winner,when:Date.now()})); } catch {}
  });
})();
</script>
</body>
</html>
